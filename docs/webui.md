# AMMF WebUI å¼€å‘æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

AMMF WebUIæ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„é…ç½®ç•Œé¢ï¼Œæä¾›äº†æ¨¡å—è®¾ç½®ã€çŠ¶æ€ç›‘æ§å’Œå¸¸ç”¨æ“ä½œçš„å›¾å½¢åŒ–ç®¡ç†åŠŸèƒ½ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ äº†è§£WebUIçš„ç»“æ„å’Œå¼€å‘æ–¹æ³•ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¡¹ç›®ç»“æ„

WebUIç›¸å…³æ–‡ä»¶ä½äº`webroot/`ç›®å½•ï¼š

```
webroot/
â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”œâ”€â”€ app.js             # åº”ç”¨é€»è¾‘
â”œâ”€â”€ core.js            # æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ i18n.js            # å¤šè¯­è¨€æ”¯æŒ
â”œâ”€â”€ style.css          # ä¸»æ ·å¼è¡¨
â”œâ”€â”€ theme.js           # ä¸»é¢˜ç®¡ç†
â”œâ”€â”€ css/               # æ ·å¼æ¨¡å—
â”‚   â”œâ”€â”€ animations.css # åŠ¨ç”»æ•ˆæœ
â”‚   â”œâ”€â”€ app.css       # åŸºç¡€æ ·å¼
â”‚   â”œâ”€â”€ main-color.css # ä¸»é¢˜è‰²é…ç½®
â”‚   â”œâ”€â”€ pages.css     # é¡µé¢æ ·å¼
â”‚   â””â”€â”€ md3.css       # MD3å¸ƒå±€æ¡†æ¶
â””â”€â”€ pages/             # é¡µé¢æ¨¡å—
    â”œâ”€â”€ status.js      # çŠ¶æ€é¡µé¢
    â”œâ”€â”€ logs.js        # æ—¥å¿—é¡µé¢
    â”œâ”€â”€ settings.js    # è®¾ç½®é¡µé¢
    â””â”€â”€ about.js       # å…³äºé¡µé¢
```

## ğŸ¨ ç•Œé¢å¼€å‘

### æ ·å¼ç³»ç»Ÿ

WebUIé‡‡ç”¨Material Design 3è®¾è®¡è§„èŒƒï¼Œä½¿ç”¨æ¨¡å—åŒ–çš„CSSç»“æ„ï¼š

- `style.css`: ä¸»æ ·å¼æ–‡ä»¶ï¼Œå¯¼å…¥å…¶ä»–CSSæ¨¡å—
- `css/md3.css`: MD3å¸ƒå±€æ¡†æ¶ï¼Œæä¾›åŸºç¡€ç»„ä»¶æ ·å¼
- `css/main-color.css`: ä¸»é¢˜è‰²é…ç½®
- `css/app.css`: åº”ç”¨åŸºç¡€æ ·å¼
- `css/pages.css`: é¡µé¢ç»„ä»¶æ ·å¼
- `css/animations.css`: åŠ¨ç”»æ•ˆæœ

### ç®€å•é…ç½®
çŠ¶æ€é¡µé¢æä¾›äº†ç®€å•é…ç½®çš„é€‰é¡¹ï¼š
```javascript
        const quickActionsEnabled = false; // è®¾ç½®ä¸ºfalseå¯å…¨éƒ¨éšè—
        const quickActions = [
            {
                title: 'æ¸…ç†ç¼“å­˜',
                icon: 'delete',
                command: 'rm -rf /data/local/tmp/*'
            },
            {
                title: 'é‡å¯æœåŠ¡',
                icon: 'restart_alt',
                command: 'sh ${Core.MODULE_PATH}service.sh restart'
            },
            {
                title: 'æŸ¥çœ‹æ—¥å¿—',
                icon: 'description',
                command: 'cat ${Core.MODULE_PATH}logs.txt'
            }
        ];
```
å…³äºç•Œé¢ä¹Ÿæä¾›äº†ç®€å•é…ç½®ï¼š
```javascript
    // é…ç½®é¡¹
    config: {
        showThemeToggle: false  // æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºä¸»é¢˜åˆ‡æ¢æŒ‰é’®
    },
```

### è‡ªå®šä¹‰ç•Œé¢æ ·å¼
ä½ å¯ä»¥åœ¨æ·»åŠ è‡ªå®šä¹‰CSSï¼Œé€šè¿‡css-loader.jsåŠ è½½ï¼š
```javascript
    // è‡ªå®šä¹‰CSSè·¯å¾„
    customCSSPath: 'css/CustomCss/main.css',
```
**æ³¨æ„**ï¼š
- ä½¿ç”¨è‡ªå®šä¹‰CSSæ—¶ï¼ŒåŸæœ‰æ ·å¼å°†å¤±æ•ˆã€‚
- å¦‚æœåªæ˜¯æƒ³æ·»åŠ è¦†ç›–cssï¼Œåªéœ€åœ¨åŸcssæ–‡ä»¶å°¾æ·»åŠ æ ·å¼æˆ–è€…ä¿®æ”¹å³å¯ã€‚

### é¡µé¢å¼€å‘

æ¯ä¸ªé¡µé¢éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„JSæ¨¡å—ï¼Œéœ€è¦å®ç°ä»¥ä¸‹æ¥å£ï¼š

```javascript
const PageModule = {
    // åˆå§‹åŒ–å‡½æ•°
    async init() {
        // è¿”å›åˆå§‹åŒ–çŠ¶æ€
        return true;
    },
    
    // æ¸²æŸ“é¡µé¢å†…å®¹
    render() {
        return `
            <div class="page-container">
                <!-- é¡µé¢å†…å®¹ -->
            </div>
        `;
    },
    
    // æ¸²æŸ“åçš„å¤„ç†
    afterRender() {
        // ç»‘å®šäº‹ä»¶ç­‰æ“ä½œ
    }
};
```

### æ·»åŠ æ–°é¡µé¢

1. åœ¨`pages/`ç›®å½•åˆ›å»ºé¡µé¢æ¨¡å—æ–‡ä»¶
2. åœ¨`index.html`å¼•å…¥é¡µé¢è„šæœ¬
3. åœ¨`app.js`æ³¨å†Œé¡µé¢æ¨¡å—
4. æ·»åŠ å¯¼èˆªæ å…¥å£
5. åœ¨`i18n.js`æ·»åŠ ç›¸å…³ç¿»è¯‘

## ğŸ”„ æ ¸å¿ƒåŠŸèƒ½

### æ•°æ®å¤„ç†

WebUIé€šè¿‡`core.js`æä¾›çš„APIä¸åç«¯é€šä¿¡ï¼š

```javascript
// æ‰§è¡ŒShellå‘½ä»¤
async execCommand(command) {
    return new Promise((resolve, reject) => {
        const callbackName = `exec_callback_${Date.now()}`;
        window[callbackName] = (errno, stdout, stderr) => {
            delete window[callbackName];
            errno === 0 ? resolve(stdout) : reject(stderr);
        };
        ksu.exec(command, "{}", callbackName);
    });
}
```

### å¤šè¯­è¨€æ”¯æŒ

ä½¿ç”¨`i18n.js`å®ç°å¤šè¯­è¨€æ”¯æŒï¼š

- ä½¿ç”¨`data-i18n`å±æ€§æ ‡è®°éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬
- åœ¨`i18n.js`ä¸­æ·»åŠ ç¿»è¯‘å­—ç¬¦ä¸²
- è°ƒç”¨`I18n.translate()`è·å–ç¿»è¯‘

### ä¸»é¢˜æ”¯æŒ

é€šè¿‡`theme.js`å®ç°ä¸»é¢˜åˆ‡æ¢ï¼š

- ä½¿ç”¨CSSå˜é‡å®šä¹‰ä¸»é¢˜è‰²
- æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼
- å“åº”ç³»ç»Ÿä¸»é¢˜å˜åŒ–

## ğŸ“± å“åº”å¼è®¾è®¡

WebUIé‡‡ç”¨ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡ï¼š

```css
/* ç§»åŠ¨è®¾å¤‡ */
@media (max-width: 767px) {
    .app-nav {
        height: 56px;
        bottom: 0;
    }
}

/* å¹³æ¿è®¾å¤‡ */
@media (min-width: 768px) and (max-width: 1023px) {
    .app-nav {
        height: 60px;
        bottom: 0;
    }
}

/* æ¡Œé¢è®¾å¤‡ */
@media (min-width: 1024px) {
    .app-nav {
        width: 80px;
        height: 100%;
        flex-direction: column;
        left: 0;
    }
}
```

## ğŸ”§ å¼€å‘å»ºè®®

1. **è°ƒè¯•å·¥å…·**
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)
   - æ·»åŠ `console.log()`è¾“å‡ºè°ƒè¯•ä¿¡æ¯
   - ä½¿ç”¨`Core.showToast()`æ˜¾ç¤ºæç¤º

2. **ä»£ç è§„èŒƒ**
   - éµå¾ªMaterial Design 3è®¾è®¡è§„èŒƒ
   - ä½¿ç”¨æ¨¡å—åŒ–çš„CSSç»“æ„
   - ä¿æŒä»£ç æ•´æ´å’Œæ³¨é‡Šå®Œæ•´

3. **æ€§èƒ½ä¼˜åŒ–**
   - å‡å°‘ä¸å¿…è¦çš„DOMæ“ä½œ
   - ä¼˜åŒ–äº‹ä»¶ç›‘å¬å™¨
   - ä½¿ç”¨CSSåŠ¨ç”»ä»£æ›¿JavaScriptåŠ¨ç”»

## ğŸ”„ ç‰ˆæœ¬å‡çº§

å‡çº§AMMFæ¡†æ¶æ—¶æ³¨æ„ä»¥ä¸‹æ–‡ä»¶çš„å˜åŒ–ï¼š

- `app.js`: åº”ç”¨é€»è¾‘
- `core.js`: æ ¸å¿ƒåŠŸèƒ½
- `i18n.js`: è¯­è¨€é…ç½®
- `css/`: æ ·å¼æ–‡ä»¶

å»ºè®®åœ¨å‡çº§å‰å¤‡ä»½è‡ªå®šä¹‰æ–‡ä»¶ï¼Œä»”ç»†åˆå¹¶æ›´æ”¹ã€‚